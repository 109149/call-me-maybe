{"version":3,"sources":["components/notification/Notification.js","components/room/Room.js","components/input/Input.js","components/button/Button.js","components/home/Home.api.js","components/home/Home.js","components/home-page-actions/HomePageActions.js","index.js","components/room/Room.module.css","styles/global.module.css"],"names":["fade","keyframes","Div","styled","div","Notification","show","text","rest","configuration","iceServers","urls","iceCandidatePoolSize","constraints","audio","video","width","exact","height","aspectRatio","Room","props","React","useState","notification","setNotification","roomId","useParams","id","redirect","path","setRedirect","userId","setUserId","socket","setSocket","localVideoRef","useRef","localStreamRef","remoteVideoRef","pcRef","useEffect","Number","window","sessionStorage","getItem","location","state","redirected","prev","current","RTCPeerConnection","onicecandidate","candidate","emit","onnegotiationneeded","a","createOffer","setLocalDescription","desc","localDescription","console","error","message","ontrack","event","srcObject","streams","onicegatheringstatechange","on","type","setRemoteDescription","createAnswer","addIceCandidate","close","start","newSocket","io","connect","navigator","mediaDevices","getUserMedia","stream","getTracks","forEach","track","addTrack","hangup","axios","post","data","success","stop","to","pathname","className","styles","room","videos","videoWrapper","mainVideo","ref","autoPlay","playsInline","floatingVideo","controls","onClick","document","querySelector","classList","replace","Input","input","InputExtended","Button","button","bkgColor","default","hover","ButtonExtended","children","globalStyles","hoverable","createRoom","response","joinRoom","Wrapper","Home","peerName","setPeerName","roomName","setRoomName","setRoomId","roomIsPublic","setRoomIsPublic","serverResponse","setServerResponse","_roomId","search","split","setItem","roomPath","handleRoomDescriptionCHange","handlePeerNameChange","target","value","handleRoomNameChange","handleRoomIdChange","then","catch","OR","HomePageActions","onChange","placeholder","App","render","ReactDOM","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.a52d988b.chunk.js","sourcesContent":["import React from \"react\";\nimport styled, { keyframes } from \"styled-components\";\n\nconst Notification = ({ show = false, text, ...rest }) => {\n  return <>{show && <Div {...rest}>{text}</Div>}</>;\n};\n\nconst fade = keyframes`\n  100% {\n    opacity: 1;\n  }\n  10% {\n    opacity: 0;\n  }\n`;\n\nconst Div = styled.div`\n  position: absolute;\n  opacity: 0;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  border: 1px solid #000;\n  padding: 12px;\n  border-radius: 5px;\n  max-width: 200px;\n  font-size: 0.9rem;\n  color: #fff;\n  z-index: 10000;\n  text-align: center;\n  background: hsl(0, 0%, 28%);\n  animation: ${fade} 2s;\n`;\n\nexport default Notification;\n","import React from \"react\";\nimport { io } from \"socket.io-client\";\nimport { Button, Notification } from \"../\";\nimport { useParams } from \"react-router-dom\";\nimport styles from \"./Room.module.css\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\n\nconst configuration = {\n  iceServers: [\n    {\n      urls: [\"stun:stun1.1.google.com:19302\", \"stun:stun2.1.google.com:19302\"],\n    },\n  ],\n  iceCandidatePoolSize: 10,\n};\n\nconst exactWidth = 320;\nconst exactHeight = 240;\n\nconst constraints = {\n  audio: true,\n  video: { width: { exact: exactWidth }, height: { exact: exactHeight } },\n  aspectRatio: {\n    exact: exactWidth / exactHeight,\n  },\n  // video: { width: { exact: 640 }, height: { exact: 480 } },\n};\n\n// const offerOptions = {\n//   offerToReceiveAudio: true,\n//   offerToReceiveVideo: true,\n// };\n\nconst Room = (props) => {\n  const [notification, setNotification] = React.useState({\n    show: false,\n    text: \"\",\n  });\n  const { id: roomId } = useParams();\n  const [redirect, setRedirect] = React.useState({\n    redirect: false,\n    path: \"/\",\n    roomId,\n  });\n  const [userId, setUserId] = React.useState(null);\n  const [socket, setSocket] = React.useState(null);\n\n  const localVideoRef = React.useRef();\n  const localStreamRef = React.useRef();\n\n  const remoteVideoRef = React.useRef();\n  // const remoteStreamRef = React.useRef();\n\n  const pcRef = React.useRef();\n\n  React.useEffect(() => {\n    // this means we visited URL directly,\n    // so we have not actually made the request to the server\n    if (\n      Number(window.sessionStorage.getItem(\"NoRedirect\")) !== 1 &&\n      (!props ||\n        !props.location ||\n        !props.location.state ||\n        !props.location.state.redirected)\n    ) {\n      setRedirect((prev) => ({ ...prev, redirect: true }));\n    }\n  }, []);\n\n  React.useEffect(() => {\n    if (socket) {\n      pcRef.current = new RTCPeerConnection(configuration);\n\n      pcRef.current.onicecandidate = function ({ candidate }) {\n        // console.log(\"onicecandidate\");\n        socket.emit(\"signal-candidate\", { roomId, candidate });\n      };\n\n      // Let the \"negotiationneeded\" event trigger offer generation.\n      pcRef.current.onnegotiationneeded = async () => {\n        // console.log(\"onnegotiationneeded\");\n        try {\n          // dataChannelEvents();\n\n          await pcRef.current.setLocalDescription(\n            await pcRef.current.createOffer()\n          );\n\n          // Send the offer to the other peer.\n          socket.emit(\"offer\", {\n            roomId,\n            desc: pcRef.current.localDescription,\n          });\n        } catch (error) {\n          console.error(error);\n          setNotification({ show: true, text: error.message });\n        }\n      };\n\n      // Once remote track media arrives, show it in remote video element.\n      pcRef.current.ontrack = (event) => {\n        // Don't set srcObject again if it is already set.\n        if (remoteVideoRef.current.srcObject) return;\n        remoteVideoRef.current.srcObject = event.streams[0];\n      };\n\n      pcRef.current.onicegatheringstatechange = (event) => {\n        // console.log(\"iceGatheringStateChange\", event);\n      };\n\n      // localVideoRef.current.onresize = (event) => {\n      //   if (event.target.clientHeight > constraints.video.height.exact) {\n      //     localVideoRef.current.style.height =\n      //       constraints.video.height.exact + \"px\";\n      //   }\n      // };\n    }\n  }, [socket]);\n\n  React.useEffect(() => {\n    if (socket) {\n      socket.on(\"log\", function (...msg) {\n        // console.log(...msg);\n      });\n\n      socket.on(\"message\", async function ({ desc, candidate }) {\n        try {\n          if (desc) {\n            // If you get an offer, you need to reply with an answer.\n            if (desc.type === \"offer\") {\n              // console.log(\"message#offer\");\n\n              // dataChannelEvents();\n\n              await pcRef.current.setRemoteDescription(desc);\n              await pcRef.current.setLocalDescription(\n                await pcRef.current.createAnswer()\n              );\n              socket.emit(\"answer\", {\n                roomId,\n                desc: pcRef.current.localDescription,\n              });\n            } else if (desc.type === \"answer\") {\n              // console.log(\"message#answer\");\n              await pcRef.current.setRemoteDescription(desc);\n            } else {\n              // console.log(\"Unsupported SDP type.\");\n            }\n          } else if (candidate) {\n            // console.log(\"message#candidate\");\n            await pcRef.current.addIceCandidate(candidate);\n          }\n        } catch (error) {\n          console.error(error);\n          setNotification({ show: true, text: error.message });\n        }\n      });\n\n      socket.on(\"created-room\", function ({ roomId }) {\n        // console.log(roomId);\n      });\n\n      socket.on(\"user-disconnected\", function ({ userId }) {\n        // console.log(\"user disconnected\", userId);\n\n        remoteVideoRef.current.srcObject = null;\n      });\n\n      socket.on(\"joined\", function ({ userId }) {\n        setUserId(userId);\n      });\n\n      return () => {\n        socket.close();\n      };\n    }\n  }, [socket]);\n\n  const start = async () => {\n    if (!localStreamRef.current) {\n      try {\n        setSocket(() => {\n          const newSocket = io.connect();\n          newSocket.emit(\"join-room\", { roomId });\n          return newSocket;\n        });\n        const stream = await navigator.mediaDevices.getUserMedia(constraints);\n\n        localStreamRef.current = stream;\n        localVideoRef.current.srcObject = localStreamRef.current;\n        localStreamRef.current\n          .getTracks()\n          .forEach((track) => pcRef.current.addTrack(track, stream));\n      } catch (error) {\n        console.error(error);\n        setNotification({ show: true, text: error.message });\n      }\n    }\n  };\n\n  const swap = () => {\n    const floatingVideo = document.querySelector(`.${styles.floatingVideo}`);\n    const mainVideo = document.querySelector(`.${styles.mainVideo}`);\n\n    floatingVideo.classList.replace(styles.floatingVideo, styles.mainVideo);\n    mainVideo.classList.replace(styles.mainVideo, styles.floatingVideo);\n  };\n\n  const hangup = async () => {\n    const leftRoom = await axios.post(\"/api/rooms/leave\", { roomId, userId });\n    if (leftRoom.data.success) {\n      // pcRef.current && pcRef.current.close();\n\n      if (localVideoRef.current) {\n        localVideoRef.current.srcObject &&\n          localVideoRef.current.srcObject.getTracks().forEach(function (track) {\n            track.stop();\n          });\n\n        localStreamRef.current = null;\n        localVideoRef.current.srcObject = localStreamRef.current;\n      }\n\n      if (remoteVideoRef.current) {\n        remoteVideoRef.current.srcObject &&\n          remoteVideoRef.current.srcObject\n            .getTracks()\n            .forEach(function (track) {\n              track.stop();\n            });\n        remoteVideoRef.current.srcObject = null;\n      }\n\n      socket && socket.close();\n      setRedirect({ redirect: true, path: \"/\", roomId: \"\" });\n    } else {\n      console.error(\"couldn't leave the room.\");\n    }\n  };\n\n  // console.log(\"Room#render\");\n  return (\n    <>\n      {redirect.redirect ? (\n        <Redirect\n          to={{\n            pathname: redirect.path || \"/\",\n            state: { roomId: redirect.roomId },\n          }}\n        />\n      ) : (\n        <div className={styles.room}>\n          <Notification show={notification.show} text={notification.text} />\n          <div className={styles.videos}>\n            <div className={`${styles.videoWrapper} ${styles.mainVideo}`}>\n              <video ref={localVideoRef} autoPlay playsInline></video>\n            </div>\n            <div className={`${styles.videoWrapper} ${styles.floatingVideo}`}>\n              <video ref={remoteVideoRef} autoPlay playsInline></video>\n            </div>\n            <div className={`${styles.controls}`}>\n              <Button onClick={start}>start</Button>\n              <Button onClick={swap}>swap</Button>\n              <Button onClick={hangup}>hang up</Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Room;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst InputExtended = (props) => {\n  return <Input {...props} />;\n};\n\nconst Input = styled.input`\n  border: 2px solid black;\n  border-radius: 6px;\n  font-size: 1.125rem;\n  padding: 5px;\n`;\n\nexport default InputExtended;\n","import React from \"react\";\nimport globalStyles from \"../../styles/global.module.css\";\nimport styled from \"styled-components\";\n\nconst ButtonExtended = ({\n  bkgColor = { default: \"hsl(29, 100%, 71%)\", hover: \"hsl(29, 100%, 61%)\" },\n  children,\n  ...rest\n}) => {\n  return (\n    <Button className={globalStyles.hoverable} bkgColor={bkgColor} {...rest}>\n      {children}\n    </Button>\n  );\n};\n\nconst Button = styled.button`\n  background-color: ${({ bkgColor }) =>\n    bkgColor.default ? bkgColor.default : \"hsl(29, 100%, 71%)\"};\n  font-size: 1.125rem;\n  padding: 6px;\n  border-radius: 6px;\n  letter-spacing: 1px;\n  border: 2px solid black;\n  text-transform: uppercase;\n  font-weight: bold;\n\n  &:hover {\n    background-color: ${({ bkgColor }) =>\n      bkgColor.hover ? bkgColor.hover : \"hsl(29, 100%, 61%)\"};\n  }\n`;\n\nexport default ButtonExtended;\n","import axios from \"axios\";\n\n// for future use;\n// api endpoint does not exist\nconst getAll = async () => {\n  const response = await axios.get(\"/api/rooms\");\n  return response.data;\n};\n\nconst createRoom = async (data) => {\n  const response = await axios.post(\"/api/rooms/create\", { ...data });\n  return response.data;\n};\n\nconst joinRoom = async (data) => {\n  const response = await axios.post(\"/api/rooms/join\", { ...data });\n  return response.data;\n};\n\nexport { getAll, createRoom, joinRoom };\n","import React from \"react\";\nimport { createRoom, joinRoom } from \"./Home.api\";\nimport { HomePageActions, Notification } from \"../\";\nimport { Redirect } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nfunction Home(props) {\n  const [notification, setNotification] = React.useState({\n    show: false,\n    text: \"\",\n  });\n  const [peerName, setPeerName] = React.useState(\"PEER_NAME\"); // for future\n  const [roomName, setRoomName] = React.useState(\"ROOM_NAME\"); // for future\n  const [roomId, setRoomId] = React.useState(\"\");\n  const [roomIsPublic, setRoomIsPublic] = React.useState(true);\n  const [serverResponse, setServerResponse] = React.useState({});\n\n  const handlePeerNameChange = (event) => {\n    setPeerName(event.target.value);\n  };\n\n  const handleRoomNameChange = (event) => {\n    setRoomName(event.target.value);\n  };\n\n  const handleRoomIdChange = (event) => {\n    setRoomId(event.target.value);\n  };\n\n  const createRoomHandler = () => {\n    createRoom({ peerName, roomName, roomIsPublic })\n      .then((response) => {\n        window.sessionStorage.setItem(\"NoRedirect\", 1);\n        setServerResponse(response);\n      })\n      .catch((error) => {\n        console.error(error);\n        setNotification({ show: true, text: error.response.data.error });\n      });\n  };\n\n  const joinRoomHandler = () => {\n    joinRoom({ peerName, roomId })\n      .then((response) => {\n        window.sessionStorage.setItem(\"NoRedirect\", 1);\n        setServerResponse(response);\n      })\n      .catch((error) => {\n        console.error(error);\n        setNotification({ show: true, text: error.response.data.error });\n      });\n  };\n\n  const handleRoomDescriptionCHange = () => {\n    setRoomIsPublic((prev) => !prev);\n  };\n\n  React.useEffect(() => {\n    let _roomId = window.location.search.split(\"=\")[1];\n    window.sessionStorage.setItem(\"NoRedirect\", 0);\n    if (_roomId) {\n      window.location.search = \"\";\n      setRoomId(_roomId);\n    } else if (\n      props &&\n      props.location &&\n      props.location.state &&\n      props.location.state.roomId\n    ) {\n      _roomId = props.location.state.roomId;\n      setRoomId(_roomId);\n    }\n  }, []);\n\n  return (\n    <>\n      {serverResponse.roomPath ? (\n        <Redirect\n          to={{\n            pathname: serverResponse.roomPath,\n            state: { redirected: true },\n          }}\n        />\n      ) : (\n        <Wrapper>\n          <Notification show={notification.show} text={notification.text} />\n          <HomePageActions\n            handleRoomDescriptionCHange={handleRoomDescriptionCHange}\n            handlePeerNameChange={handlePeerNameChange}\n            handleRoomNameChange={handleRoomNameChange}\n            handleRoomIdChange={handleRoomIdChange}\n            peerName={peerName}\n            roomName={roomName}\n            roomId={roomId}\n            roomIsPublic={roomIsPublic}\n            createRoom={createRoomHandler}\n            joinRoom={joinRoomHandler}\n          />\n        </Wrapper>\n      )}\n    </>\n  );\n}\n\nconst Wrapper = styled.div`\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n`;\n\nexport default Home;\n","import React from \"react\";\nimport { Button, Input } from \"../\";\nimport styled from \"styled-components\";\n\nconst HomePageActions = ({\n  handleRoomDescriptionCHange,\n  handlePeerNameChange,\n  handleRoomNameChange,\n  handleRoomIdChange,\n  peerName = \"\",\n  roomName = \"\",\n  roomIsPublic = true,\n  roomId,\n  createRoom,\n  joinRoom,\n}) => {\n  return (\n    <>\n      <div>\n        {/* <Input */}\n        {/*   type=\"text\" */}\n        {/*   onChange={handlePeerNameChange} */}\n        {/*   value={peerName} */}\n        {/*   placeholder=\"Peer Name\" */}\n        {/* /> */}\n      </div>\n\n      <Wrapper>\n        <div>\n          <Button onClick={createRoom}>create</Button>\n\n          {/* <Input */}\n          {/*   type=\"text\" */}\n          {/*   onChange={handleRoomNameChange} */}\n          {/*   value={roomName} */}\n          {/*   placeholder=\"Room Name\" */}\n          {/* /> */}\n\n          {/* <Input */}\n          {/*   type=\"checkbox\" */}\n          {/*   name=\"isPublic\" */}\n          {/*   defaultChecked={roomIsPublic} */}\n          {/*   onChange={handleRoomDescriptionCHange} */}\n          {/* /> */}\n          {/* <label htmlFor=\"isPublic\">PUBLIC</label> */}\n        </div>\n        <OR>or</OR>\n        <div>\n          <Button\n            onClick={joinRoom}\n            bkgColor={{\n              default: \"hsl(14, 100%, 66%)\",\n              hover: \"hsl(14, 100%, 56%)\",\n            }}\n          >\n            join\n          </Button>\n          <Input\n            type=\"text\"\n            onChange={handleRoomIdChange}\n            value={roomId}\n            placeholder=\"Room ID\"\n          />\n        </div>\n      </Wrapper>\n    </>\n  );\n};\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n\n  & div {\n    margin: 12px;\n  }\n`;\n\nconst OR = styled.div`\n  color: white;\n  text-transform: uppercase;\n  font-weight: bold;\n`;\n\nexport default HomePageActions;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { Home, Room } from \"./components\";\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\n\nfunction App() {\n  return (\n    <>\n      <Router>\n        <Switch>\n          <Route exact path=\"/\" render={(props) => <Home {...props} />} />\n          <Route path=\"/rooms/:id\" render={(props) => <Room {...props} />} />\n        </Switch>\n      </Router>\n    </>\n  );\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"room\":\"Room_room__1Qxur\",\"videos\":\"Room_videos__1mony\",\"videoWrapper\":\"Room_videoWrapper__32MCG\",\"controls\":\"Room_controls__3BHzR\",\"mainVideo\":\"Room_mainVideo__1yyR-\",\"floatingVideo\":\"Room_floatingVideo__2_0S_\",\"canvasWrapper\":\"Room_canvasWrapper__2WO9P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoverable\":\"global_hoverable__WZ7oA\"};"],"sourceRoot":""}